<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Private Agricultural Insurance Claims - Confidential Processing System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-sunset: #d97706;
            --secondary-sunset: #ea580c;
            --dark-bg: #1c1917;
            --card-bg: #292524;
            --accent-amber: #f59e0b;
            --accent-red: #dc2626;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1c1917 0%, #44403c 50%, #292524 100%);
            min-height: 100vh;
            color: #e0e0e0;
        }

        .navbar {
            background: linear-gradient(90deg, var(--primary-sunset), var(--secondary-sunset)) !important;
            box-shadow: 0 4px 20px rgba(234, 88, 12, 0.3);
        }

        .hero-section {
            background: linear-gradient(135deg, var(--primary-sunset), var(--secondary-sunset));
            color: white;
            padding: 60px 0;
            margin-bottom: 40px;
            box-shadow: 0 10px 40px rgba(245, 158, 11, 0.3);
        }

        .card {
            border: none;
            border-radius: 20px;
            background: var(--card-bg);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(245, 158, 11, 0.2);
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 60px rgba(245, 158, 11, 0.4);
            border-color: var(--accent-amber);
        }

        .card-header {
            background: linear-gradient(90deg, var(--secondary-sunset), var(--primary-sunset));
            color: white;
            border-radius: 20px 20px 0 0 !important;
            border: none;
        }

        .btn-primary {
            background: linear-gradient(90deg, var(--secondary-sunset), var(--primary-sunset));
            border: none;
            border-radius: 25px;
            padding: 12px 30px;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.6);
        }

        .btn-warning {
            background: linear-gradient(90deg, var(--accent-amber), #d97706);
            border: none;
            border-radius: 25px;
        }

        .form-control, .form-select {
            border-radius: 10px;
            border: 2px solid rgba(245, 158, 11, 0.3);
            background: rgba(41, 37, 36, 0.6);
            color: #e0e0e0;
            transition: all 0.3s ease;
        }

        .form-control:focus, .form-select:focus {
            border-color: var(--accent-amber);
            box-shadow: 0 0 0 0.2rem rgba(245, 158, 11, 0.25);
            background: rgba(41, 37, 36, 0.8);
            color: #fff;
        }

        .form-label {
            color: #d6d3d1;
        }

        .status-submitted { color: #fbbf24; }
        .status-review { color: var(--accent-amber); }
        .status-approved { color: #22c55e; }
        .status-rejected { color: #ef4444; }
        .status-paid { color: #10b981; }

        .stats-card {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(217, 119, 6, 0.1));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .icon-large {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--accent-amber);
        }

        .alert-info {
            background: linear-gradient(90deg, rgba(245, 158, 11, 0.15), rgba(234, 88, 12, 0.15));
            border-color: var(--accent-amber);
            border-radius: 10px;
            color: #fef3c7;
        }

        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .tx-hash {
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            word-break: break-all;
        }

        .table {
            color: #e0e0e0;
        }

        .table-striped tbody tr:nth-of-type(odd) {
            background-color: rgba(245, 158, 11, 0.1);
        }

        footer {
            background: linear-gradient(90deg, var(--primary-sunset), var(--secondary-sunset)) !important;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="#"><i class="fas fa-seedling me-2"></i>Private Agricultural Insurance</a>
            <div class="ms-auto">
                <span id="walletAddress" class="navbar-text me-3">No Wallet Connected</span>
                <button class="btn btn-outline-light btn-sm" onclick="connectWallet()" id="connectBtn">
                    <i class="fas fa-wallet me-1"></i>Connect Wallet
                </button>
            </div>
        </div>
    </nav>

    <div class="hero-section">
        <div class="container text-center">
            <h1><i class="fas fa-shield-alt me-3"></i>Confidential Agricultural Insurance System</h1>
            <p class="lead">Protecting agricultural insurance data privacy using Zama FHE technology, ensuring confidential and fair claim processing</p>
            <div class="row mt-5">
                <div class="col-md-4">
                    <i class="fas fa-lock icon-large"></i>
                    <h4>Complete Privacy</h4>
                    <p>All insurance amounts and claim data are encrypted with homomorphic encryption</p>
                </div>
                <div class="col-md-4">
                    <i class="fas fa-search icon-large"></i>
                    <h4>Transparent Review</h4>
                    <p>Blockchain-based transparent claim review process</p>
                </div>
                <div class="col-md-4">
                    <i class="fas fa-tractor icon-large"></i>
                    <h4>Agriculture Specialized</h4>
                    <p>Smart contract system designed specifically for agricultural insurance</p>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row mb-4">
            <div class="col-md-4">
                <div class="card stats-card">
                    <div class="card-body text-center">
                        <i class="fas fa-file-contract text-primary" style="font-size: 2rem;"></i>
                        <h4 class="mt-2" id="totalPolicies">-</h4>
                        <p class="text-muted">Total Policies</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card stats-card">
                    <div class="card-body text-center">
                        <i class="fas fa-clipboard-list text-warning" style="font-size: 2rem;"></i>
                        <h4 class="mt-2" id="totalClaims">-</h4>
                        <p class="text-muted">Total Claims</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card stats-card">
                    <div class="card-body text-center">
                        <i class="fas fa-check-circle text-success" style="font-size: 2rem;"></i>
                        <h4 class="mt-2" id="activePolicies">-</h4>
                        <p class="text-muted">Active Policies</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-plus-circle me-2"></i>Create Insurance Policy</h5>
                    </div>
                    <div class="card-body">
                        <form id="policyForm">
                            <div class="mb-3">
                                <label class="form-label">Coverage Amount (USDT)</label>
                                <input type="number" class="form-control" id="coverage" placeholder="Enter coverage amount" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Premium (USDT)</label>
                                <input type="number" class="form-control" id="premium" placeholder="Enter premium amount" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Crop Type</label>
                                <select class="form-select" id="cropType" required>
                                    <option value="0">Wheat</option>
                                    <option value="1">Corn</option>
                                    <option value="2">Rice</option>
                                    <option value="3">Soybeans</option>
                                    <option value="4">Cotton</option>
                                    <option value="5">Other</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Farm Size (Acres)</label>
                                <input type="number" class="form-control" id="farmSize" placeholder="Enter farm size" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Insurance Duration (Days)</label>
                                <input type="number" class="form-control" id="duration" value="365" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Document IPFS Hash</label>
                                <input type="text" class="form-control" id="ipfsHash" placeholder="Document storage hash">
                            </div>
                            <button type="submit" class="btn btn-primary w-100">
                                <i class="fas fa-shield-alt me-2"></i>Create Policy
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-file-medical me-2"></i>Submit Claim</h5>
                    </div>
                    <div class="card-body">
                        <form id="claimForm">
                            <div class="mb-3">
                                <label class="form-label">Policy ID</label>
                                <input type="number" class="form-control" id="policyId" placeholder="Enter policy ID" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Damage Amount (USDT)</label>
                                <input type="number" class="form-control" id="damageAmount" placeholder="Actual damage amount" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Claim Amount (USDT)</label>
                                <input type="number" class="form-control" id="claimAmount" placeholder="Requested claim amount" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Risk Type</label>
                                <select class="form-select" id="riskType" required>
                                    <option value="0">Drought</option>
                                    <option value="1">Flood</option>
                                    <option value="2">Hail</option>
                                    <option value="3">Frost</option>
                                    <option value="4">Disease</option>
                                    <option value="5">Pest</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Evidence IPFS Hash</label>
                                <input type="text" class="form-control" id="evidenceHash" placeholder="Evidence document hash" required>
                            </div>
                            <button type="submit" class="btn btn-warning w-100">
                                <i class="fas fa-file-upload me-2"></i>Submit Claim
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-12 mb-4">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5><i class="fas fa-list me-2"></i>My Policies</h5>
                        <button class="btn btn-outline-light btn-sm" onclick="loadUserData()">
                            <i class="fas fa-sync-alt me-1"></i>Refresh
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="policiesContainer">
                            <div class="text-center text-muted">
                                <i class="fas fa-folder-open" style="font-size: 3rem; opacity: 0.3;"></i>
                                <p class="mt-3">Please connect your wallet to view policy information</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-12 mb-4">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-clipboard-list me-2"></i>My Claims</h5>
                    </div>
                    <div class="card-body">
                        <div id="claimsContainer">
                            <div class="text-center text-muted">
                                <i class="fas fa-clipboard" style="font-size: 3rem; opacity: 0.3;"></i>
                                <p class="mt-3">Please connect your wallet to view claim records</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>
            <strong>Privacy Protection:</strong> This system uses Zama FHE (Fully Homomorphic Encryption) technology to ensure all insurance amounts and claim data are encrypted on the blockchain. Only authorized parties can decrypt and view the data, protecting your privacy and security.
        </div>
    </div>

    <footer class="mt-5 py-4 text-center" style="background: var(--primary-sunset); color: white;">
        <p>&copy; 2025 Private Agricultural Insurance System. Built with Zama FHE Technology</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <script src="app.js"></script>
</body>
</html>